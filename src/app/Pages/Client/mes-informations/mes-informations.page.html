<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Mes informations</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="userForm" *ngIf="userForm">
    <!-- Prénom -->
    <ion-input 
      label="Prénom *" 
      labelPlacement="stacked" 
      formControlName="prénom" 
      fill="outline"
      class="top-input">
    </ion-input>
    <div *ngIf="userForm.get('prénom').touched && userForm.get('prénom').invalid" class="error-message">
      Prénom requis
    </div>

    <!-- Nom -->
    <ion-input 
      label="Nom"
      labelPlacement="stacked" 
      formControlName="nom"
      fill="outline">
    </ion-input>

    <!-- Email -->
    <ion-input 
      label="Email"
      labelPlacement="stacked" 
      type="email"
      formControlName="email"
      fill="outline"
      readonly>
    </ion-input>

    <!-- Téléphone -->
    <ion-input 
      label="Téléphone"
      labelPlacement="stacked" 
      type="tel"
      formControlName="telephone"
      fill="outline">
    </ion-input>

    <!-- Genre -->
    <ion-select 
      label="Genre" 
      labelPlacement="stacked"
      formControlName="genre"
      fill="outline">
      <ion-select-option value="homme">Homme</ion-select-option>
      <ion-select-option value="femme">Femme</ion-select-option>
      <ion-select-option value="x">Ne pas préciser</ion-select-option>
    </ion-select>

    <!-- Adresse -->
    <div class="address-section">
      <h3>Votre adresse</h3>
      
      <!-- Rue et numéro -->
      <ion-input 
        label="Rue et numéro *"
        labelPlacement="stacked" 
        type="text"
        placeholder="Ex: Rue de la Loi 16"
        formControlName="rue"
        class="address-input"
        fill="outline">
      </ion-input>
      <div *ngIf="userForm.get('rue').touched && userForm.get('rue').invalid" class="error-message">
        Rue et numéro requis
      </div>

      <!-- Commune -->
      <ion-select
        label="Commune *"
        labelPlacement="stacked"
        placeholder="Sélectionnez votre commune"
        fill="outline"
        formControlName="commune"
        class="address-input">
        <ion-select-option *ngFor="let commune of communes" [value]="commune">
          {{commune}}
        </ion-select-option>
      </ion-select>
      <div *ngIf="userForm.get('commune').touched && userForm.get('commune').invalid" class="error-message">
        Commune requise
      </div>
    </div>

    <ion-button expand="block" (click)="updateProfile()" class="black-button" [disabled]="!userForm.valid">
      Sauvegarder
    </ion-button>
  </form>
  <div class="delete-account-link">
    <a routerLink="/delete-account" class="danger-link">
      Supprimer mon compte
    </a>
  </div>
</ion-content>
